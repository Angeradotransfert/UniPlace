<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{{ _('UniPlace – Trouvez tout entre étudiants') }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">


    <style>
        body {
    font-family: 'Baloo 2', sans-serif;
    background-color: #f5f5f5;
}

.navbar-brand span {
    font-size: 1.6rem;
    font-weight: bold;
}

.uniplace-colorful span {
    display: inline-block;
}

.u { color: #ff5252; }
.n { color: #ffb300; }
.i { color: #00e676; }
.p { color: #2979ff; }
.l { color: #ab47bc; }
.a { color: #ff7043; }
.c { color: #26c6da; }
.e { color: #8d6e63; }

.hero-banner {
    background: linear-gradient(135deg, #6EE7B7 0%, #3B82F6 100%);
    color: white;
    padding: 60px 30px;
    text-align: center;
}

.hero-banner h1 {
    font-size: 48px;
    font-weight: bold;
}

.section-title {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 20px;
    color: #333;
}

.product-card {
    background: white;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.05);
    transition: transform 0.2s;
}

.product-card:hover {
    transform: translateY(-5px);
}

footer {
    background-color: #333;
    color: white;
    padding: 40px 20px;
}

footer a {
    color: #ccc;
    text-decoration: none;
}

footer a:hover {
    color: white;
}

.flag-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    margin: 0 8px;
    padding: 0;
    outline-offset: 2px;
    display: flex;
    align-items: center;
    transition: transform 0.3s ease;
    position: relative;
}

.flag-btn:hover, .flag-btn:focus {
    transform: scale(1.2);
    outline: 2px solid #2979ff;
    border-radius: 6px;
    animation: flagWave 1.2s ease-in-out infinite;
}

.flag-btn.active {
    transform: scale(1.3);
    filter: drop-shadow(0 0 4px #2979ff);
    cursor: default;
}

.flag {
    display: block;
    width: 36px;
    height: 24px;
    transform-origin: left center;
    will-change: transform;
}

/* Animation drapeau qui ondule */
@keyframes flagWave {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(3deg); }
}

@media (max-width: 576px) {
    .flag-btn {
        margin: 0 5px;
    }
    .flag {
        width: 28px;
        height: 18px;
    }
}

/* Style pour la bannière horizontale */
.horizontal-banner {
    background-color: #2979ff; /* Couleur de fond de la bannière */
    color: white;
    font-size: 30px; /* Taille du texte */
    font-weight: bold;
    text-align: center;
    padding: 20px;
    white-space: nowrap;
    overflow: hidden;
    position: relative;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    margin: 20px 0;
    font-family: 'Poppins', sans-serif; /* Appliquer la nouvelle police */
    letter-spacing: 2px; /* Espacement entre les lettres pour agrandir le texte */
    word-spacing: 5px; /* Espacement entre les mots */
}

/* Contenu défilant dans la bannière */
.horizontal-banner-content {
    display: inline-block;
    animation: scroll-left 18s linear infinite; /* Animation de défilement vers la gauche */
    font-size: 36px; /* Taille du texte agrandie */
    font-weight: bold; /* Mettre en gras pour plus de visibilité */
    white-space: nowrap; /* Évite les sauts de ligne */
}

/* Animation de défilement horizontal */
@keyframes scroll-left {
    0% {
        transform: translateX(100%); /* Commence à droite */
    }
    100% {
        transform: translateX(-100%); /* Se déplace complètement à gauche */
    }
}

/* Couleurs pour chaque partie de la phrase */
.u { color: #ff5252; }  /* Orange */
.p { color: #ffeb3b; }  /* Jaune clair */
.highlight { color: #ff9800; } /* Jaune */
.n { color: #ffb300; } /* Jaune clair */
.e { color: #8d6e63; }  /* Gris */
.c { color: #26c6da; } /* Turquoise */
.l { color: #ab47bc; }  /* Violet */
.a { color: #ff7043; }  /* Rouge */
.i { color: #00e676; }  /* Vert */

/* Style pour la deuxième bannière horizontale (différente) */
.second-banner {
    background-color: #ff7043; /* Couleur de fond différente (Rouge) */
    color: white;
    font-size: 28px; /* Taille du texte différente */
    font-family: 'Quicksand', sans-serif; /* Police différente */
    font-weight: bold;
    text-align: center;
    padding: 20px;
    white-space: nowrap;
    overflow: hidden;
    position: relative;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    margin: 20px 0;
}

/* Contenu défilant dans la deuxième bannière */
.second-banner .horizontal-banner-content {
    font-size: 32px; /* Taille du texte agrandie pour cette bannière */
    animation: scroll-left 20s linear infinite; /* Défilement plus lent */
}

/* Couleurs spécifiques pour chaque mot de la deuxième bannière */
.second-banner .a { color: #ffeb3b; } /* Jaune clair */
.second-banner .c { color: #26c6da; } /* Turquoise */
.second-banner .l { color: #ff9800; } /* Orange */
.second-banner .e { color: #ff5252; } /* Rouge */

/* Style de la deuxième bannière */
.second-banner .highlight {
    color: #8bc34a; /* Vert clair pour l'accent */
    font-weight: bold;
}

/* Effet au survol du texte */
.second-banner .horizontal-banner-content span:hover {
    color: #fff; /* Change la couleur en blanc lors du survol */
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.8); /* Ombre lumineuse */
    transform: scale(1.1); /* Légère augmentation de la taille lors du survol */
    transition: all 0.3s ease; /* Transition fluide */
}

/* Styles généraux */
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }

  /* Media Query pour les petits écrans (mobile) */
  @media screen and (max-width: 768px) {
    body {
      font-size: 14px;
    }

    .menu {
      display: none; /* Par exemple, on cache le menu principal pour mobile */
    }

    .menu-mobile {
      display: block; /* On montre un menu mobile */
    }

    .header {
      text-align: center;
    }
  }

  /* Media Query pour les écrans plus grands (tablette et plus) */
  @media screen and (min-width: 769px) {
    .menu {
      display: block;
    }

    .menu-mobile {
      display: none;
    }
  }
    </style>
</head>
<body>


<!-- ✅ NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
    <div class="container">
        <a class="navbar-brand" href="#">
            <span class="uniplace-colorful">
                <span class="u">U</span><span class="n">n</span><span class="i">i</span><span class="p">P</span><span class="l">l</span><span class="a">a</span><span class="c">c</span><span class="e">e</span>
            </span>
        </a>
        <form class="d-flex ms-auto me-3" role="search">
            <input class="form-control me-2" type="search" placeholder="{{ _('Rechercher…') }}" aria-label="Search">
            <button class="btn btn-outline-primary" type="submit">{{ _('Rechercher') }}</button>
        </form>
        <div class="d-flex">
            <a href="/login" class="btn btn-link me-2">{{ _('Connexion') }}</a>
            <a href="/signup" class="btn btn-primary">{{ _('S\'inscrire') }}</a>

            <form method="GET" action="{{ url_for('main.set_language') }}" class="d-flex align-items-center ms-3" id="lang-form" aria-label="Sélecteur de langue">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <input type="hidden" name="lang" id="lang-input" value="{{ session.get('lang') or 'fr' }}">

  <button type="button" class="flag-btn {{ 'active' if session.get('lang') == 'fr' else '' }}" data-lang="fr" aria-label="Français" title="Français">
    <svg class="flag" viewBox="0 0 900 600" width="36" height="24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" focusable="false">
      <rect width="300" height="600" fill="#0055A4"/>
      <rect x="300" width="300" height="600" fill="#FFFFFF"/>
      <rect x="600" width="300" height="600" fill="#EF4135"/>
    </svg>
  </button>

  <button type="button" class="flag-btn {{ 'active' if session.get('lang') == 'en' else '' }}" data-lang="en" aria-label="English" title="English">
    <svg class="flag" viewBox="0 0 60 30" width="36" height="24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" focusable="false">
      <clipPath id="t">
        <path d="M0,0 v30 h60 v-30 z"/>
      </clipPath>
      <clipPath id="s">
        <path d="M30,15 h30 v15 h-30z"/>
      </clipPath>
      <rect width="60" height="30" fill="#012169"/>
      <path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"/>
      <path d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#s)" stroke="#C8102E" stroke-width="4"/>
      <path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/>
      <path d="M30,0 v30 M0,15 h60" stroke="#C8102E" stroke-width="6"/>
    </svg>
  </button>

  <button type="button" class="flag-btn {{ 'active' if session.get('lang') == 'ru' else '' }}" data-lang="ru" aria-label="Русский" title="Русский">
    <svg class="flag" viewBox="0 0 900 600" width="36" height="24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" focusable="false">
      <rect width="900" height="200" fill="#fff"/>
      <rect y="200" width="900" height="200" fill="#0039A6"/>
      <rect y="400" width="900" height="200" fill="#D52B1E"/>
    </svg>
  </button>
</form>


        </div>
    </div>
</nav>

<div class="horizontal-banner">
    <div class="horizontal-banner-content">
        <span class="u">{{ _('Uni') }}</span>
        <span class="p">{{ _('Place') }}</span> –
        <span class="highlight">{{ _('Achetez') }}</span>
        <span class="n">{{ _('ce que') }}</span>
        <span class="e">{{ _('vous') }}</span>
        <span class="c">{{ _('aimez,') }}</span>
        <span class="l">{{ _('trouvez') }}</span>
        <span class="a">{{ _('ce que') }}</span>
        <span class="i">{{ _('vous') }}</span>
        <span class="e">{{ _('cherchez') }}</span>
        <span class="c">!!!</span>
        <span class="second-phrase">
            <span class="a">{{ _('Connectez-vous') }}</span>
            <span class="c">{{ _('et explorez') }}</span>
            <span class="l">{{ _('un monde') }}</span>
            <span class="e">{{ _('d\'opportunités !') }}</span>
        </span>
    </div>
</div>






<!-- ✅ CARROUSEL PROMO -->
<div id="carouselPromos" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    {% for promo in promos %}
    <div class="carousel-item {% if loop.first %}active{% endif %}">
      <img src="{{ promo.image_filename }}" class="d-block w-100" alt="{{ promo.title }}">
      <div class="carousel-caption d-none d-md-block">
        <h5>{{ promo.title }}</h5>
        {% if promo.description %}
        <p>{{ promo.description }}</p>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselPromos" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselPromos" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- 📢 Annonces sponsorisées -->
<div class="container my-5">
    <h2 class="section-title">📢 {{ _('Annonces sponsorisées') }}</h2>
    <div class="row">
        {% for listing in sponsorises %}
        <div class="col-md-3 mb-4">
            <div class="product-card position-relative">

                <!-- Badge sponsorisé -->
               <span class="badge bg-info text-dark position-absolute top-0 start-0 m-2">{{ _('Sponsorisé') }}</span>

                <!-- Image -->
                <img src="{{ listing.images[0].cloudinary_url if listing.images else '/static/default.jpg' }}" class="img-fluid rounded mb-2" alt="image">
                     class="img-fluid rounded mb-2" alt="image">

                <!-- Titre & prix -->
                <h5>{{ listing.title }}</h5>
                <p class="text-primary">{{ listing.price }} ₽</p>

                <a href="{{ url_for('listings.annonce_detail', listing_id=listing.id) }}" class="btn btn-sm btn-primary w-100">{{ _('Voir') }}</a>

            </div>
        </div>
        {% endfor %}
    </div>
</div>



<!-- ✅ SECTIONS (à remplir dynamiquement) -->
<div class="container my-5">

    <!-- 🔥 Offres du jour -->
   <h2 class="section-title">🔥 {{ _('Offres du jour') }}</h2>
    <div class="row" id="offres-jour">
    {% for listing in offres_jour %}
    <div class="col-md-3 mb-4">
        <div class="product-card">
            {% if listing._is_promo %}
                <span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2">🔥 {{ _('Promo') }}</span>
            {% endif %}

            <img src="{{ listing.images[0].cloudinary_url if listing.images else '/static/default.jpg' }}" class="img-fluid rounded mb-2" alt="image">
            <h5>{{ listing.title }}</h5>
            <p class="text-danger fw-bold">{{ listing.discount_price }} ₽
                <del class="text-muted">{{ listing.original_price or listing.price }} ₽</del>
            </p>
            <a href="{{ url_for('listings.annonce_detail', listing_id=listing.id) }}" class="btn btn-sm btn-primary w-100">{{ _('Voir') }}</a>
        </div>
    </div>
    {% endfor %}
    </div>

    <!-- 💡 Recommandé pour vous -->
    <h2 class="section-title">💡 {{ _('Recommandé pour vous') }}</h2>
    <div class="row" id="recommandations">
    {% for listing in recommandations %}
    <div class="col-md-3 mb-4">
        <div class="product-card">
            {% if listing._is_promo %}
                <span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2">🔥 {{ _('Promo') }}</span>
            {% endif %}

            <img src="{{ listing.images[0].cloudinary_url if listing.images else '/static/default.jpg' }}" class="img-fluid rounded mb-2" alt="image">
            <h5>{{ listing.title }}</h5>
            <p>{{ listing.price }} ₽</p>
            <a href="{{ url_for('listings.annonce_detail', listing_id=listing.id) }}" class="btn btn-sm btn-primary w-100">{{ _('Voir') }}</a>
        </div>
    </div>
    {% endfor %}
    </div>
</div>



    <!-- 🛒 Populaires -->
    <div class="row" id="populaires">
        <h2 class="section-title">🛒 {{ _('Populaires') }}</h2>
    {% for listing in populaires %}
    <div class="col-md-3 mb-4">
        <div class="product-card">
            {% if listing._is_promo %}
<span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2">🔥 {{ _('Promo') }}</span>
{% endif %}
            <img src="{{ listing.images[0].cloudinary_url if listing.images else '/static/default.jpg' }}" class="img-fluid rounded mb-2" alt="image">
            <h5>{{ listing.title }}</h5>
            <p>{{ _('Note') }} : ⭐ {{ listing.average_rating }}</p>
           <a href="{{ url_for('listings.annonce_detail', listing_id=listing.id) }}" class="btn btn-sm btn-primary w-100">{{ _('Voir') }}</a>
        </div>
    </div>
    {% endfor %}
</div>


    <!-- 🏷️ Catégories dynamiques -->
<div class="mb-5">
    <h2 class="section-title">🏷️ {{ _('catégories') }}</h2>
    <div class="row text-center">
        {% for category in categories %}
        <div class="col-md-3 mb-3">
            <a href="/annonces?category={{ category }}" class="btn btn-outline-primary w-100">{{ _(category) }}</a>

        </div>
        {% endfor %}
    </div>
</div>
</div>

<!-- 🆕 Nouveautés -->
<div class="mb-5">
    <h2 class="section-title">🆕 {{ _('Nouveautés') }}</h2>
    <div class="row">
        {% for listing in nouveautes %}
        <div class="col-md-3 mb-4">
            <div class="product-card position-relative">

                {% if listing._is_promo %}
<span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2">🔥 {{ _('Promo') }}</span>
{% endif %}
                <!-- Badge NOUVEAU -->
                {% if listing._is_new %}
                <span class="badge bg-danger position-absolute top-0 start-0 m-2">{{ _('Nouveau') }}</span>
                {% endif %}


                <!-- Image -->
                <img src="{{ listing.images[0].cloudinary_url if listing.images else '/static/default.jpg' }}" class="img-fluid rounded mb-2" alt="image">

                <!-- Titre / prix -->
                <h5>{{ listing.title }}</h5>
                <p class="text-primary">{{ listing.price }} ₽</p>

                <!-- Bouton -->
                <a href="{{ url_for('listings.annonce_detail', listing_id=listing.id) }}" class="btn btn-sm btn-outline-dark w-100">{{ _('Voir') }}</a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>



<!-- ✅ FOOTER -->
<footer>
    <div class="container text-center">
        <p>© 2025 UniPlace – {{ _('Tous droits réservés') }}</p>
        <p>
            <a href="/contact">{{ _('Contact') }}</a> |
            <a href="/cgu">{{ _('CGU') }}</a> |
            <a href="/confidentialite">{{ _('Confidentialité') }}</a>
        </p>
    </div>
</footer>

<!-- Bootstrap Bundle JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  document.querySelectorAll('.flag-btn').forEach(button => {
    button.addEventListener('click', () => {
      if (button.classList.contains('active')) return; // évite resoumission
      const lang = button.getAttribute('data-lang');
      document.getElementById('lang-input').value = lang;
      document.getElementById('lang-form').submit();
    });
  });
</script>


</body>
</html>
